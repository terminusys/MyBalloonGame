# 🎮 游戏功能测试指南

## 📋 测试清单

### 1️⃣ 图层深度测试

#### 测试1：玩家气球 vs 广告气球
**目标**：确认玩家气球始终在广告气球上方

**步骤**：
1. 登录管理员账号（DDKJ / DDKJ88888888）
2. 添加一个广告气球，位置设置为画面中央（X=400, Y=300）
3. 输入广告词："测试广告位"
4. 设置透明度：0.9
5. 关闭管理面板
6. 操作玩家气球飞向广告气球位置
7. **预期结果**：玩家气球应该显示在广告气球上方，不被遮挡

**深度配置**：
- 广告气球：depth = 3
- 玩家气球：depth = 100 ✓

---

#### 测试2：金币 vs 广告气球
**目标**：确认金币在广告气球上方，清晰可见

**步骤**：
1. 游戏会自动生成金币
2. 等待金币出现在广告气球附近
3. **预期结果**：金币应该显示在广告气球上方，清晰可见，不被遮挡

**深度配置**：
- 广告气球：depth = 3
- 金币：depth = 10 ✓

---

#### 测试3：障碍物 vs 广告气球
**目标**：确认障碍物（小鸟、雷云）在广告气球上方

**步骤**：
1. 游戏会随机生成障碍物（小鸟或雷云）
2. 等待障碍物出现在广告气球附近
3. **预期结果**：障碍物应该显示在广告气球上方，清晰可见

**深度配置**：
- 广告气球：depth = 3
- 障碍物：depth = 10 ✓

---

### 2️⃣ 透明度测试

**目标**：测试不同透明度的视觉效果

**步骤**：
1. 登录管理员账号
2. 添加多个广告气球，分别设置不同透明度：
   - 气球1：透明度 = 1.0（完全不透明）
   - 气球2：透明度 = 0.9（90%）
   - 气球3：透明度 = 0.7（70%）
   - 气球4：透明度 = 0.5（50%）
3. **预期结果**：
   - 透明度越高，广告气球越清晰
   - 透明度越低，广告气球越淡，更融入背景
   - 所有广告气球都应该在玩家气球下方

---

### 3️⃣ 金币优化测试

#### 测试4：金币12秒自动消失
**目标**：确认金币在12秒后自动消失

**步骤**：
1. 进入游戏，注意观察某个金币的出现时间
2. 等待10秒，金币应该开始闪烁（提示即将消失）
3. 再等待2秒，金币应该淡出并消失
4. **预期结果**：
   - 10秒后金币开始闪烁
   - 12秒后金币完全消失
   - 金币从数组中被移除，为新金币腾出空间

**实现逻辑**：
```javascript
- 10秒后：开始闪烁动画（alpha: 0.3 ↔ 1.0，重复6次）
- 12秒后：淡出动画（alpha → 0, scale → 0）
- 消失后：从 coins 数组中移除
```

---

#### 测试5：金币数量限制
**目标**：确认界面上同时最多只有20个金币

**步骤**：
1. 进入游戏
2. 在左上角观察金币分数旁边的控制台输出
3. 等待金币生成
4. **预期结果**：
   - 金币数量会逐渐增加
   - 当达到20个时，不再生成新金币
   - 控制台输出："💰 金币生成，当前数量: X"（X ≤ 20）
   - 当旧金币被收集或消失后，才会生成新金币

**实现逻辑**：
```javascript
if (coins.length < 20 && Math.random() < 0.02) {
    // 生成新金币
}
```

---

### 4️⃣ 综合测试场景

**场景1：完整游戏流程**
1. 添加3个广告气球（不同位置和透明度）
2. 开始游戏，操作玩家气球飞行
3. 收集金币，观察分数增加
4. 碰撞障碍物，观察分数减少
5. 飞过广告气球区域
6. 等待金币自动消失

**预期效果**：
- ✅ 玩家气球始终在最上层
- ✅ 金币和障碍物在广告之上
- ✅ 广告气球在背景层，缓慢晃动
- ✅ 金币12秒后自动消失
- ✅ 界面上最多20个金币
- ✅ 所有元素层级清晰，无遮挡问题

---

## 🎯 图层深度总览

```
UI层 (depth: 1000)
├─ 分数显示
└─ 提示文字

游戏前景层 (depth: 100)
├─ 玩家气球 ← 你控制的气球
└─ 其他玩家气球

游戏元素层 (depth: 10)
├─ 金币 🪙
├─ 障碍物（小鸟）🐦
└─ 障碍物（雷云）⚡

广告层 (depth: 3)
└─ 广告气球 🎈（背景装饰）

背景层 (depth: 0-1)
├─ 白云 ☁️ (depth: 1)
└─ 天空渐变 (depth: 0)
```

---

## 💡 常见问题

**Q1: 为什么我的玩家气球被广告遮挡了？**
A: 这不应该发生。玩家气球的 depth = 100，远高于广告气球的 depth = 3。请强制刷新页面（Ctrl+Shift+R）。

**Q2: 金币没有在12秒后消失？**
A: 金币会在10秒后开始闪烁（预警），12秒后完全消失。请确保观察完整的12秒时长。

**Q3: 界面上有超过20个金币？**
A: 这可能包括正在消失动画中的金币。实际活跃金币数量不会超过20个。

**Q4: 广告图片变形了？**
A: 新版本已修复此问题，图片会保持原始宽高比，自动缩放到最大120像素。

---

## 🚀 部署状态

代码已提交到 GitHub 并自动部署到 Vercel。
访问链接：https://my-balloon-game.vercel.app

**更新内容**：
- ✅ 添加广告图片透明度设置
- ✅ 优化图层深度（玩家>金币/障碍物>广告>背景）
- ✅ 修复广告图片变形问题
- ✅ 金币12秒后自动消失
- ✅ 金币数量限制为20个
